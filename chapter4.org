#+TITLE: 所有權

* 記憶體配置
- 區塊以 ={}= 包覆
- 結束區塊時自動呼叫 =drop= 函式清理動態配置的記憶體

* =\== 對資料的操作
- 有 =Copy= 特徵的資料直接複製
- 其他資料轉移所有權，舊變數無效

* 對變數進行深度複製
- 使用 =clone= 函式複製 heap 資料

  #+BEGIN_SRC rust
let s1 = String::from("hello");
let s2 = s1.clone();
  #+END_SRC

* 函數
- 參數等同於使用 === 對資料的操作，轉移所有權到參數上
- 回傳會轉移所有權

** 借用
- 函數的參數使用參照，不轉移所有權。
  #+BEGIN_SRC rust
fn calculate_length(s: &String) -> usize
{
    // calculation here
}
  #+END_SRC

- 使用時一樣要寫上參照
  #+BEGIN_SRC rust
let s1 = String::from("hello");
let len = calculate_length(&s1);
  #+END_SRC

*** 可變參照

* 回[[file:README.md][目錄]]
